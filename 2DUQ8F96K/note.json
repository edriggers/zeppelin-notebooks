{
  "noteForms": {}, 
  "angularObjects": {
    "splicemachine:shared_process": [], 
    "md:shared_process": []
  }, 
  "name": "Splice Machine Training / For Data Scientists / h. Decision Trees Example", 
  "info": {}, 
  "noteParams": {}, 
  "paragraphs": [
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n# Decision Trees Example\n<link rel=\"stylesheet\" href=\"https://doc.splicemachine.com/zeppelin/css/zepstyles2.css\" />\n\nThis notebook provides an example of implementing a *Decision Tree* algorithm that:\n\n* Loads a data file\n* Parses the data as an RDD of LabeledPoint\n* Performs classification using a decision tree with Gini impurity as an impurity measure and a maximum tree depth of 5.\n\nThe <a href=\"https://spark.apache.org/docs/latest/mllib-decision-tree.html\" target=\"_blank\">Decision Tree Algorithm</a> is a greedy algorithm that performs a recursive binary partitioning of the feature space for predictive modeling. Here are some interesting points about this algorithm: \n\n* Locally optimal decisions are made at each node in hopes of a globally optimal decision\n* Because of it's greedy nature, it cannot guarantee the globally optimal tree\n\nAt its core (and most simplified), decision trees are simply a system of if-else statements, always taking the most optimal answer, resulting in (hopefully) the most optimal decision, as shown in this diagram:\n\n<img class=\"splice\" src=\"http://mines.humanoriented.com/classes/2010/fall/csci568/portfolio_exports/lguo/image/decisionTree/classification.jpg\">", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h1>Decision Trees</h1>\n<link rel=\"stylesheet\" href=\"https://doc.splicemachine.com/zeppelin/css/zepstyles2.css\" />\n<p>This notebook provides an example of implementing a <em>Decision Trees Example</em> algorithm that:</p>\n<ul>\n  <li>Loads a data file</li>\n  <li>Parses the data as an RDD of LabeledPoint</li>\n  <li>Performs classification using a decision tree with Gini impurity as an impurity measure and a maximum tree depth of 5.</li>\n</ul>\n<p>The <a href=\"https://spark.apache.org/docs/latest/mllib-decision-tree.html\" target=\"_blank\">Decision Tree Algorithm</a> is a greedy algorithm that performs a recursive binary partitioning of the feature space for predictive modeling. Here are some interesting points about this algorithm: </p>\n<ul>\n  <li>Locally optimal decisions are made at each node in hopes of a globally optimal decision</li>\n  <li>Because of it&rsquo;s greedy nature, it cannot guarantee the globally optimal tree</li>\n</ul>\n<p>At its core (and most simplified), decision trees are simply a system of if-else statements, always taking the most optimal answer, resulting in (hopefully) the most optimal decision, as shown in this diagram:</p>\n<img class=\"splice\" src=\"http://mines.humanoriented.com/classes/2010/fall/csci568/portfolio_exports/lguo/image/decisionTree/classification.jpg\">\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1542398443304_1947682620", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-01 07:13:03.558", 
      "dateCreated": "2018-11-16 12:00:43.000", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20170620-141909_771490751", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n## Decision Tree Example\n\nThe example in the next paragraph loads a LIBSVM data file, available from <a href=\"https://github.com/apache/spark/blob/master/data/mllib/sample_libsvm_data.txt\" target=\"_blank\">https://github.com/apache/spark/blob/master/data/mllib/sample_libsvm_data.txt</a>.\n\nIt then parses that data as an RDD of labeled points, and performs classification using a decision tree with Gini impurity as an impurity measure and a maximum tree depth of 5. The test error is calculated, to measure the accuracy of the algorithm.\n\nYou can learn more about decision trees with MLlib on <a href=\"https://spark.apache.org/docs/latest/mllib-decision-tree.html\" target=\"_blank\">Spark's Decision Tree page</a>.", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h2>Decision Tree Example</h2>\n<p>The example in the next paragraph loads a LIBSVM data file, available from <a href=\"https://github.com/apache/spark/blob/master/data/mllib/sample_libsvm_data.txt\" target=\"_blank\"><a href=\"https://github.com/apache/spark/blob/master/data/mllib/sample_libsvm_data.txt\">https://github.com/apache/spark/blob/master/data/mllib/sample_libsvm_data.txt</a></a>.</p>\n<p>It then parses that data as an RDD of labeled points, and performs classification using a decision tree with Gini impurity as an impurity measure and a maximum tree depth of 5. The test error is calculated, to measure the accuracy of the algorithm.</p>\n<p>You can learn more about decision trees with MLlib on <a href=\"https://spark.apache.org/docs/latest/mllib-decision-tree.html\" target=\"_blank\">Spark&rsquo;s Decision Tree page</a>.</p>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1542767864123_962201816", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-01 07:13:09.994", 
      "dateCreated": "2018-11-20 18:37:44.123", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "completionKey": "TAB", 
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20181120-183744_1917061299", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "READY", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%spark\nimport org.apache.spark.mllib.tree.DecisionTree\nimport org.apache.spark.mllib.tree.model.DecisionTreeModel\nimport org.apache.spark.mllib.util.MLUtils\n\n// Load and parse the data file.\nval data = MLUtils.loadLibSVMFile(sc, \"/opt/data/sample_libsvm_data.txt\")\n// Split the data into training and test sets (30% held out for testing)\nval splits = data.randomSplit(Array(0.7, 0.3))\nval (trainingData, testData) = (splits(0), splits(1))\n\n// Train a DecisionTree model.\n//  Empty categoricalFeaturesInfo indicates all features are continuous.\nval numClasses = 2\nval categoricalFeaturesInfo = Map[Int, Int]()\nval impurity = \"gini\"\nval maxDepth = 5\nval maxBins = 32\n\nval model = DecisionTree.trainClassifier(trainingData, numClasses, categoricalFeaturesInfo,\n  impurity, maxDepth, maxBins)\n\n// Evaluate model on test instances and compute test error\nval labelAndPreds = testData.map { point =>\n  val prediction = model.predict(point.features)\n  (point.label, prediction)\n}\nval testErr = labelAndPreds.filter(r => r._1 != r._2).count().toDouble / testData.count()\nprintln(\"Test Error = \" + testErr)\nprintln(\"Learned classification tree model:\\n\" + model.toDebugString)\n", 
      "errorMessage": "", 
      "apps": [], 
      "jobName": "paragraph_1542398443305_2007728913", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-03 04:32:10.161", 
      "dateCreated": "2018-11-16 12:00:43.000", 
      "config": {
        "enabled": true, 
        "results": {}, 
        "editorMode": "ace/mode/scala", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "completionKey": "TAB", 
          "editOnDblClick": false, 
          "completionSupport": true, 
          "language": "scala"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20170620-153325_126659046", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "FINISHED", 
      "dateFinished": "2018-12-12 02:12:36.900", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n## Where to Go Next\n\nThe next notebook in this class shows you an example of implementing a simple [*ETL Pipeline Example*](/#/notebook/2DWVX87QY) in a Splice Machine Zeppelin notebook.\n", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h2>Where to Go Next</h2>\n<p>The next notebook in this class shows you an example of implementing a simple <a href=\"/#/notebook/2DWVX87QY\"><em>ETL Pipeline Example</em></a> in a Splice Machine Zeppelin notebook.</p>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1542398443306_-1240311123", 
      "user": "anonymous", 
      "dateStarted": "2018-12-12 02:12:36.887", 
      "dateUpdated": "2018-12-12 02:12:36.887", 
      "dateCreated": "2018-11-16 12:00:43.000", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "completionKey": "TAB", 
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20170620-153620_626385294", 
      "progressUpdateIntervalMs": 500
    }
  ], 
  "config": {
    "looknfeel": "default", 
    "personalizedMode": "false", 
    "isZeppelinNotebookCronEnable": false
  }, 
  "id": "2DUQ8F96K"
}