{
  "noteForms": {}, 
  "angularObjects": {}, 
  "name": "Splice Machine Training / For Data Scientists / g. KMeans Example", 
  "info": {}, 
  "noteParams": {}, 
  "paragraphs": [
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n\n<link rel=\"stylesheet\" href=\"https://doc.splicemachine.com/zeppelin/css/zepstyles2.css\" />\n# KMeans Example\n\nThis notebook shows you how to implement a simple *KMeans* algorithm in a Zeppelin notebook, in these sections:\n\n* *Setting Up KMeans*\n* *Computing KMEans*\n* *Simple KMeans Example*\n\nKMeans is an unsupervised-learning, clustering algorithm used to determine similarities and trends within a given dataset. KMeans is an iterative process, where K clusters are created by the user and continually computed on a given dataset until the data converges and the algorithm ends.\n", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<link rel=\"stylesheet\" href=\"https://doc.splicemachine.com/zeppelin/css/zepstyles2.css\" />\n<h1>KMeans Example</h1>\n<p>This notebook shows you how to implement a simple <em>KMeans</em> algorithm in a Zeppelin notebook, in these sections:</p>\n<ul>\n  <li><em>Setting Up KMeans</em></li>\n  <li><em>Computing KMEans</em></li>\n  <li><em>Simple KMeans Example</em></li>\n</ul>\n<p>KMeans is an unsupervised-learning, clustering algorithm used to determine similarities and trends within a given dataset. KMeans is an iterative process, where K clusters are created by the user and continually computed on a given dataset until the data converges and the algorithm ends.</p>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1542398329138_264893937", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-03 02:45:31.000", 
      "dateCreated": "2018-11-16 11:58:49.000", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {
          "0": {
            "graph": {
              "optionOpen": false, 
              "mode": "table", 
              "height": 70.375
            }
          }
        }, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20170620-100414_1484018649", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n## Setting up a KMeans\nYou need the following to implement KMeans:\n\n* A dataset of structured data. Learn about structured data <a href=\"https://www.quora.com/What-are-Structured-semi-structured-and-unstructured-data-in-Big-Data/answer/Manoj-R-Patil?srid=33JGI\" target=\"_blank\">here</a>.\n* A value for K, which can be computed a number of ways, none of which are necessarily incorrect. It is dependent on the specific dataset you are working with. It is suggested to first plot your data and do trials with multiple values of K. Learn more about choosing a good K <a href=\"https://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set\" target=\"_blank\">here</a>.\n", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h2>Setting up a KMeans</h2>\n<p>You need the following to implement KMeans:</p>\n<ul>\n  <li>A dataset of structured data. Learn about structured data <a href=\"https://www.quora.com/What-are-Structured-semi-structured-and-unstructured-data-in-Big-Data/answer/Manoj-R-Patil?srid=33JGI\" target=\"_blank\">here</a>.</li>\n  <li>A value for K, which can be computed a number of ways, none of which are necessarily incorrect. It is dependent on the specific dataset you are working with. It is suggested to first plot your data and do trials with multiple values of K. Learn more about choosing a good K <a href=\"https://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set\" target=\"_blank\">here</a>.</li>\n</ul>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1543619984600_1733167874", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-01 07:11:53.658", 
      "dateCreated": "2018-11-30 23:19:44.600", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20181130-231944_212485663", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n\n## Computing KMeans\nA KMeans algorithm is computed in three main steps:\n\n1. K clusters are created and assigned locations, either randomly generated or randomly taken from K datapoints\n2. For each datapoint in your dataset, the square Euclidian Distance is computed against all clusters until a minimum is found. That datapoint is assigned to the cluster of minimum distance\n3. After all datapoints are assigned, clusters are recomputed and reassigned locations using the mean distance of its assigned datapoints.\n\nSteps 2 and 3 are repeated until one of the following occurs:\n\n* A set number of iterations occurs\n* No datapoints are reassigned to new clusters\n* Minimum distance changes occur within clusters\n\nLearn more about the KMeans algorithm <a href=\"https://www.datascience.com/blog/introduction-to-k-means-clustering-algorithm-learn-data-science-tutorials\" target=\"blank\">here</a>.\nYoull find in-depth KMeans clustering documentation <a href=\"http://scikit-learn.org/stable/modules/clustering.html#k-means\" target=\"_blank\">here</a>.", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h2>Computing KMeans</h2>\n<p>A KMeans algorithm is computed in three main steps:</p>\n<ol>\n  <li>K clusters are created and assigned locations, either randomly generated or randomly taken from K datapoints</li>\n  <li>For each datapoint in your dataset, the square Euclidian Distance is computed against all clusters until a minimum is found. That datapoint is assigned to the cluster of minimum distance</li>\n  <li>After all datapoints are assigned, clusters are recomputed and reassigned locations using the mean distance of its assigned datapoints.</li>\n</ol>\n<p>Steps 2 and 3 are repeated until one of the following occurs:</p>\n<ul>\n  <li>A set number of iterations occurs</li>\n  <li>No datapoints are reassigned to new clusters</li>\n  <li>Minimum distance changes occur within clusters</li>\n</ul>\n<p>Learn more about the KMeans algorithm <a href=\"https://www.datascience.com/blog/introduction-to-k-means-clustering-algorithm-learn-data-science-tutorials\" target=\"blank\">here</a>.<br/>Youll find in-depth KMeans clustering documentation <a href=\"http://scikit-learn.org/stable/modules/clustering.html#k-means\" target=\"_blank\">here</a>.</p>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1543619580933_-851893031", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-01 07:12:00.465", 
      "dateCreated": "2018-11-30 23:13:00.933", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20181130-231300_283923131", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n## A Simple KMeans Example\n\nThe paragraph below implements a simple example of KMeans. You can:\n\n* Follow along by downloading the data from here: <a href=\"https://raw.githubusercontent.com/datascienceinc/learn-data-science/master/Introduction-to-K-means-Clustering/Data/data_1024.csv\" target=\"_blank\">https://raw.githubusercontent.com/datascienceinc/learn-data-science/master/Introduction-to-K-means-Clustering/Data/data_1024.csv.\n* See more KMeans and Scala examples here: <a href=\"https://github.com/apache/spark/tree/master/examples/src/main/scala/org/apache/spark/examples/mllib\" target=\"_blank\">https://github.com/apache/spark/tree/master/examples/src/main/scala/org/apache/spark/examples/mllib</a>.\n* Learn more about Sum of Squares for Errors, which is used in our algorithm, here: <a href=\"http://www.wikihow.com/Calculate-the-Sum-of-Squares-for-Error-(SSE)\" target=\"_blank\">https://www.wikihow.com/Calculate-the-Sum-of-Squares-for-Error-(SSE)</a>.", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h2>A Simple KMeans Example</h2>\n<p>The paragraph below implements a simple example of KMeans. You can:</p>\n<ul>\n  <li>Follow along by downloading the data from here: <a href=\"https://raw.githubusercontent.com/datascienceinc/learn-data-science/master/Introduction-to-K-means-Clustering/Data/data_1024.csv\" target=\"_blank\"><a href=\"https://raw.githubusercontent.com/datascienceinc/learn-data-science/master/Introduction-to-K-means-Clustering/Data/data_1024.csv\">https://raw.githubusercontent.com/datascienceinc/learn-data-science/master/Introduction-to-K-means-Clustering/Data/data_1024.csv</a>.</li>\n  <li>See more KMeans and Scala examples here: <a href=\"https://github.com/apache/spark/tree/master/examples/src/main/scala/org/apache/spark/examples/mllib\" target=\"_blank\"><a href=\"https://github.com/apache/spark/tree/master/examples/src/main/scala/org/apache/spark/examples/mllib\">https://github.com/apache/spark/tree/master/examples/src/main/scala/org/apache/spark/examples/mllib</a></a>.</li>\n  <li>Learn more about Sum of Squares for Errors, which is used in our algorithm, here: <a href=\"http://www.wikihow.com/Calculate-the-Sum-of-Squares-for-Error-(SSE)\" target=\"_blank\"><a href=\"https://www.wikihow.com/Calculate-the-Sum-of-Squares-for-Error-(SSE)\">https://www.wikihow.com/Calculate-the-Sum-of-Squares-for-Error-(SSE)</a></a>.</li>\n</ul>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1542767394316_90114078", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-01 07:12:08.370", 
      "dateCreated": "2018-11-20 18:29:54.316", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "completionKey": "TAB", 
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20181120-182954_729821940", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "READY", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%spark\nimport org.apache.spark.{SparkConf, SparkContext}\nimport org.apache.spark.mllib.clustering.{KMeans, KMeansModel}\nimport org.apache.spark.mllib.linalg.Vectors\n\n//Grabbing data and parsing to vectors\n\nval data = sc.textFile(\"/opt/data/kmeans_data.txt\")\nval formatted =  data.map(s => s.split(\" \")).map(s => s.drop(1)).collect().drop(1).map(s => s.map(_.toDouble))\nval parsedData = formatted.map(s => Vectors.dense(s))\nval rddData = sc.parallelize(parsedData)\n\n//Clustering data into 3 groups\nval K = 4\nval maxIterations = 5000\nval clusters = KMeans.train(rddData, K, maxIterations)\n\n//Compute cost Within Set Sum of Squared Errors\nval WSSSE = clusters.computeCost(rddData)\nprintln(\"Within Set Sum of Squared Errors: \" + WSSSE)", 
      "errorMessage": "", 
      "apps": [], 
      "jobName": "paragraph_1542398329139_490492218", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-03 04:29:39.322", 
      "dateCreated": "2018-11-16 11:58:49.000", 
      "config": {
        "editorHide": false, 
        "enabled": true, 
        "results": {}, 
        "editorMode": "ace/mode/scala", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "completionKey": "TAB", 
          "editOnDblClick": false, 
          "completionSupport": true, 
          "language": "scala"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20170620-100456_224981933", 
      "progressUpdateIntervalMs": 500
    }, 
    {
      "status": "FINISHED", 
      "settings": {
        "forms": {}, 
        "params": {}
      }, 
      "text": "%md\n## Where to Go Next\nThe next notebook in this class, [*Decision Trees Example*](/#/notebook/2DUQ8F96K), walks you through another Machine Learning example: using a decision tree to perform classification.\n", 
      "apps": [], 
      "results": {
        "msg": [
          {
            "data": "<div class=\"markdown-body\">\n<h2>Where to Go Next</h2>\n<p>The next notebook in this class, <a href=\"/#/notebook/2DUQ8F96K\"><em>Decision Trees Example</em></a>, walks you through another Machine Learning example: using a decision tree to perform classification.</p>\n</div>", 
            "type": "HTML"
          }
        ], 
        "code": "SUCCESS"
      }, 
      "jobName": "paragraph_1542398329139_288790578", 
      "user": "anonymous", 
      "dateUpdated": "2018-12-01 07:12:18.735", 
      "dateCreated": "2018-11-16 11:58:49.000", 
      "config": {
        "editorHide": true, 
        "enabled": false, 
        "results": {}, 
        "editorMode": "ace/mode/markdown", 
        "fontSize": 9.0, 
        "tableHide": false, 
        "editorSetting": {
          "completionKey": "TAB", 
          "editOnDblClick": true, 
          "completionSupport": false, 
          "language": "markdown"
        }, 
        "colWidth": 12.0
      }, 
      "id": "20170620-140030_993087114", 
      "progressUpdateIntervalMs": 500
    }
  ], 
  "config": {
    "looknfeel": "default", 
    "personalizedMode": "false", 
    "isZeppelinNotebookCronEnable": false
  }, 
  "id": "2DX6TGACY"
}